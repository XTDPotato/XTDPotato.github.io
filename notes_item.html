<!doctype html>
<html class="mdui-theme-auto">

</html>
</html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no"/>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <link rel="stylesheet" href="https://unpkg.com/mdui@2.0.3/mdui.css">


    <script src="https://unpkg.com/mdui@2.0.3/mdui.global.js"></script>

<!-- Filled -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Outlined -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

<!-- Rounded -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

<!-- Sharp -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">

<!-- Two Tone -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Two+Tone" rel="stylesheet">

    <title>笔记项目</title>
  </head>
<body>




<mdui-list>


<mdui-list-item rounded class="btn_note" id="note1" description="点击打开查看笔记内容">一个临时IPv6地址</mdui-list-item>
<mdui-list-item rounded class="btn_note" id="note2" description="内容太多了会怎么样呢？我也不清楚">测试条目2</mdui-list-item>
<mdui-list-item rounded class="btn_note" id="note3" description="点击打开查看笔记内容">测试条目3</mdui-list-item>

</mdui-list>

</body>
<!-- 查看笔记内容以及复制 -->
<mdui-dialog stacked-actions fullscreen headline="笔记名称" class="note_copy_dialog" height="100%">
<iframe src="note1.html" id="note_frame" style="border:0px;display:none;" width="90%" height="100%"></iframe>
  <mdui-text-field id="copy_content" rows="30" max-rows="30" style="margin:5px;width:90%;height:100%;" label="笔记内容"></mdui-text-field>
 <mdui-button id="copy_btn" slot="action" variant="text">复制全文</mdui-button>
 <mdui-button id="close_btn" slot="action" variant="tonal">关闭</mdui-button>
 </mdui-dialog>

<script>
//定义常驻变量
"use strict"; // 添加严格模式指令

let main_snackbar = document.querySelector(".snackbar_no_action");
let note_copy_dialog = document.querySelector(".note_copy_dialog");
let note_frame = document.getElementById("note_frame");
let close_btn = document.getElementById("close_btn");
let btn_notes = document.querySelectorAll(".btn_note")
let note_ipv6 = "通过获取";
let copy_btn = document.getElementById("copy_btn");



//笔记点击事件
// 遍历列表项，给每个列表项添加点击事件
for (let btn_note of btn_notes) {
  btn_note.addEventListener("click", () => {
    if (note_copy_dialog) { // 检查元素是否存在
      note_copy_dialog.headline = btn_note.textContent;
      //内容需要用其他方法展现
      note_frame.src = "notes/"+btn_note.id+".html"



      copy_content.innerHTML = "加载中";
      copy_content.value = "加载中";
      copy_btn.disable = true;

      var timer1 = setTimeout(function () {
        // 获取 <iframe> 里面的文档对象
        var iframeDoc = note_frame.contentDocument || note_frame.contentWindow.document;
        // 获取 <iframe> 里面的目标元素
        var target = iframeDoc.getElementById("text");
        // 获取目标元素的文本内容
        var text = target.innerHTML || target.textContent; // 使用 innerHTML 属性
        copy_content.innerHTML = text;
        copy_content.value = text;
        copy_btn.disable = false;
      }, 500);


      note_copy_dialog.open = true;


    }
  });
}

//复制按钮
copy_btn.addEventListener("click", ()=>{
  copyStr();

});
//关闭按钮
close_btn.addEventListener("click", ()=>{
  note_copy_dialog.open = false;

});

// 定义一个复制函数
async function copyStr() { // 使用异步函数
  // 获取textarea元素
  var textarea = document.getElementById("copy_content");
  // 选中textarea中的文本
  textarea.select();
  document.execCommand("copy");


}




</script>

</html>